<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giỏ hàng</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
</head>

<body>
    <div class="container">
        <h1>Giỏ hàng</h1>

        <table class="table table-striped cart-table">
            <thead>
                <tr>
                    <th>Tên sản phẩm</th>
                    <th>Số lượng</th>
                    <th>Giá</th>
                    <th>Tổng</th>
                </tr>
            </thead>
            <tbody id="cart-items">
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="3">Tổng thanh toán</td>
                    <td id="cart-total"></td>
                </tr>
            </tfoot>
        </table>

        <div class="d-flex justify-content-between">
            <a href="/" class="btn btn-primary">Tiếp tục mua sắm</a>
            <a href="/checkout" class="btn btn-success">Thanh toán</a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const cartItemsList = document.getElementById('cart-items');
        const cartTotalSpan = document.getElementById('cart-total');

        function fetchCartItems() {
            fetch('http://localhost:3000/fishingRods/cart') // Replace with your actual API endpoint
                .then(response => response.json())
                .then(data => {
                    cartItemsList.innerHTML = ''; // Clear existing items
                    cartTotalSpan.textContent = ''; // Clear existing total

                    if (data.length === 0) {
                        cartItemsList.innerHTML = '<h2>Giỏ hàng trống</h2>'; // Display message for empty cart
                    } else {
                        data.forEach(item => {
                            const listItem = document.createElement('li'); // Change to 'tr' for table rows
                            listItem.textContent = `${item.name} (x${item.quantity})`; // Customize item display
                            cartItemsList.appendChild(listItem);
                        });

                        const total = calculateTotal(data); // Implement calculation for total (if needed)
                        cartTotalSpan.textContent = total;
                    }
                })
                .catch(error => console.error('Error fetching cart items:', error));
        }

        // Function to calculate total (replace with your logic)
        function calculateTotal(cartItems) {
            let totalPrice = 0;
            cartItems.forEach(item => {
                totalPrice += item.price * item.quantity;
            });
            return totalPrice.toLocaleString('vi-VN', { style: 'currency', currency: 'VND' }); // Format as currency
        }

        // Call fetchCartItems on page load
        fetchCartItems();
    </script>
</body>

</html>